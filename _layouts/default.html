<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title }} | oshigototools</title>

  <!-- Meta Tags -->
  <meta name="description" content="{{ page.description | default: 'oshigototoolsは、仕事を秒速で終わらせるツール群。シンプルで使いやすく生産性を爆上げします。' }}">
  <meta name="keywords" content="ツール, 仕事効率化, 時短, oshigototools, シンプルツール, {{ page.keywords }}">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Twitter Card -->
  <meta property="og:title" content="{{ page.title }} | oshigototools">
  <meta property="og:description" content="{{ page.description | default: '仕事を秒速で終わらせる神ツール集。今すぐ使える。' }}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:image" content="https://og.oshigototools.com{{ page.url }}.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ page.title }} | oshigototools">
  <meta name="twitter:description" content="{{ page.description | default: '今すぐ使える仕事効率化ツール。' }}">
  <meta name="twitter:image" content="https://og.oshigototools.com{{ page.url }}.png">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "oshigototools",
    "url": "{{ site.url }}",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ site.url }}/?s={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="{{ '/css/common.css' | relative_url }}">
  
  <!-- シェアボタンのスタイル（モバイル対応強化版） -->
  <style>
    /* シェアボタンのスタイル */
    .share-container {
      margin-top: 2rem;
      margin-bottom: 2rem;
      width: 100%;
      /* 確実に表示されるようにdisplayプロパティを追加 */
      display: block !important;
      position: relative;
      z-index: 10;
    }
    
    .share-buttons {
      display: flex !important;
      flex-wrap: wrap;
      gap: 0.75rem;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    
    .share-link {
      display: flex !important;
      align-items: center;
      text-decoration: none;
      background-color: white;
      border-radius: 9999px;
      padding: 0.75rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      /* モバイルでのタップ領域を広げる */
      min-width: 2.5rem;
      min-height: 2.5rem;
      justify-content: center;
      /* モバイルでも確実に表示されるよう */
      opacity: 1 !important;
      visibility: visible !important;
    }
    
    .share-link:hover {
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transform: translateY(-1px);
    }
    
    .share-icon {
      width: 1.5rem;
      height: 1.5rem;
      z-index: 1;
      /* アイコンが表示されない問題を防ぐため */
      display: block !important;
    }
    
    .share-name {
      max-width: 0;
      overflow: hidden;
      white-space: nowrap;
      transition: max-width 0.3s ease, margin-left 0.3s ease;
      z-index: 1;
    }
    
    /* PC表示時のみ名前を表示する */
    @media (min-width: 768px) {
      .share-link:hover .share-name {
        max-width: 150px;
        margin-left: 0.5rem;
      }
    }
    
    /* モバイル向けの調整 */
    @media (max-width: 767px) {
      .share-link {
        padding: 0.75rem;
        /* モバイルで確実に表示されるように */
        display: flex !important;
      }
      
      .share-buttons {
        gap: 1rem;
        /* モバイルで確実に表示されるように */
        display: flex !important;
      }
      
      .share-container {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
      }
    }
    
    .share-bg {
      position: absolute;
      inset: 0;
      background-color: #f3f4f6;
      transform: scale(0);
      transition: transform 0.3s ease;
      border-radius: 9999px;
    }
    
    .share-link:hover .share-bg,
    .share-link:active .share-bg {
      transform: scale(1);
    }
    
    /* プラットフォーム別の色 */
    .share-x-color { color: #000000; }
    .share-bluesky-color { color: #0085FF; }
    .share-threads-color { color: #000000; }
    .share-line-color { color: #06C755; }
  </style>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="96x96" href="{{ '/favicon/favicon-96x96.png' | relative_url }}">
  <link rel="icon" type="image/svg+xml" href="{{ '/favicon/favicon.svg' | relative_url }}">
  <link rel="shortcut icon" href="{{ '/favicon/favicon.ico' | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/favicon/apple-touch-icon.png' | relative_url }}">
  <meta name="apple-mobile-web-app-title" content="oshigoto">
  <link rel="manifest" href="{{ '/favicon/site.webmanifest' | relative_url }}">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9WSSYVFF7J"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-9WSSYVFF7J');
  </script>

  {{ page.styles }}
</head>
<body class="min-h-screen flex flex-col">
  {% include header.html %}

  <main class="flex-1 max-w-4xl mx-auto p-4">
    {{ content }}

    <!-- モバイル対応のシェアボタン -->
    <div class="share-container">
      <div class="share-buttons">
        <!-- X (Twitter) -->
        <a href="https://twitter.com/intent/tweet?text={{ page.title | uri_escape }}%20{{ site.url | append: page.url | uri_escape }}" 
           target="_blank" rel="noopener" class="share-link" aria-label="Share on X (Twitter)">
          <div class="share-bg"></div>
          <img src="{{ '/assets/x-icon.svg' | relative_url }}" alt="X (旧Twitter)" class="share-icon">
          <span class="share-name share-x-color">X</span>
        </a>
        
        <!-- Bluesky -->
        <a href="https://bsky.app/intent/compose?text={{ page.title | uri_escape }}%20{{ site.url | append: page.url | uri_escape }}" 
           target="_blank" rel="noopener" class="share-link" aria-label="Share on Bluesky">
          <div class="share-bg"></div>
          <img src="{{ '/assets/bluesky-icon.svg' | relative_url }}" alt="Bluesky" class="share-icon">
          <span class="share-name share-bluesky-color">Bluesky</span>
        </a>
        
        <!-- Threads -->
        <a href="https://www.threads.net/intent/post?text={{ page.title | uri_escape }}%20{{ site.url | append: page.url | uri_escape }}" 
           target="_blank" rel="noopener" class="share-link" aria-label="Share on Threads">
          <div class="share-bg"></div>
          <img src="{{ '/assets/threads-icon.svg' | relative_url }}" alt="Threads" class="share-icon">
          <span class="share-name share-threads-color">Threads</span>
        </a>
        
        <!-- LINE -->
        <a href="https://social-plugins.line.me/lineit/share?url={{ site.url | append: page.url | uri_escape }}" 
           target="_blank" rel="noopener" class="share-link" aria-label="Share on LINE">
          <div class="share-bg"></div>
          <img src="{{ '/assets/line-icon.svg' | relative_url }}" alt="LINE" class="share-icon">
          <span class="share-name share-line-color">LINE</span>
        </a>
      </div>
    </div>

  </main>

  {% include footer.html %}
  
  <!-- デバッグ用スクリプト -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // シェアボタンの表示を確認
      console.log('Share container exists:', !!document.querySelector('.share-container'));
      console.log('Share buttons exist:', !!document.querySelector('.share-buttons'));
      console.log('Share links count:', document.querySelectorAll('.share-link').length);
      
      // モバイル表示でボタンが見えないときのデバッグ
      const shareContainer = document.querySelector('.share-container');
      const shareButtons = document.querySelector('.share-buttons');
      
      if (shareContainer) {
        console.log('Share container styles:', window.getComputedStyle(shareContainer));
      }
      
      if (shareButtons) {
        console.log('Share buttons styles:', window.getComputedStyle(shareButtons));
        
        // 各シェアボタンのスタイルをチェック
        document.querySelectorAll('.share-link').forEach((link, index) => {
          console.log(`Share link ${index} styles:`, window.getComputedStyle(link));
        });
      }
    });
  </script>
</body>
</html>